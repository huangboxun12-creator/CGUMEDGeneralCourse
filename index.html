<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0" />
    <title>é•·åºšé†«å­¸ç³»é€šè­˜åˆ†äº«å€</title>
    <style>
        /* æ•´åˆ MMC é¢¨æ ¼èˆ‡ Everyclass ç²¾è¯ */
        body { background-color: #eeeeee; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; margin: 0; }
        #index_frame { width: 100%; max-width: 600px; text-align: center; }
        
        /* æ¨™é¡Œèˆ‡è³‡è¨Šæ¬„ */
        .label_title { font-size: 25px; font-weight: bold; width: 100%; line-height: 24px; text-align: center; color: black; background-color: #87e967; padding: 15px; border-radius: 10px; border: 3px solid #000; display: block; box-sizing: border-box; }
        .label_info { font-size: 18px; font-weight: bold; width: 100%; text-align: center; color: black; background-color: #fddb69; padding: 10px; border-radius: 10px; border: 3px solid #000; margin: 10px 0; display: block; box-sizing: border-box; }
        
        /* MMC ç¶“å…¸å®¹å™¨ */
        .index_choosebox { margin: 10px auto; background-color: #ffffff; padding: 15px; border-radius: 10px; border: 3px solid #000; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .index_choosebox2 { margin: 10px auto; background-color: #ffffff; padding: 15px; border-radius: 10px; border: 3px solid #000; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; border-style: dashed; }

        /* æŒ‰éˆ•æ¨£å¼ */
        .btn_home { appearance: none; width: 100%; font-size: 18px; font-weight: bold; text-align: center; color: black; background-color: #7edcfc; border-radius: 10px; padding: 12px; border: 3px solid #000; cursor: pointer; box-shadow: 3px 3px 0px #29c6fa; transition: 0.1s; }
        .btn_home:active { transform: translate(2px, 2px); box-shadow: none; }
        .btn_home2 { background-color: #FFD2D7; box-shadow: 3px 3px 0px #d06f79; width: 100%; font-size: 16px; font-weight: bold; padding: 10px; border-radius: 10px; border: 3px solid #000; cursor: pointer; }

        /* å¿ƒå¾—å¡ç‰‡ */
        .label_comment { font-size: 16px; width: 100%; background-color: #ffffff; border-radius: 10px; padding: 15px; border: 3px solid #000; margin-bottom: 15px; text-align: left; box-sizing: border-box; }

        /* åº•éƒ¨è³‡è¨Š */
        .label_coder { font-size: 14px; color: #555; margin-top: 20px; }
        .last_update { font-size: 12px; color: #888; cursor: pointer; text-decoration: underline; }

        /* å±¤ç´šåˆ‡æ› */
        .layer { display: none; width: 100%; flex-direction: column; align-items: center; }
        .active { display: flex; }
        .nav_group { display: flex; gap: 10px; width: 100%; margin-bottom: 10px; }
        
        @media screen and (max-width:600px){
            #index_frame { width: 95%; }
        }
    </style>
</head>
<body>

<div id="index_frame">
    <label class="label_title">é•·åºšé†«å­¸ç³»é€šè­˜åˆ†äº«å€ ğŸ“š</label>
    
    <div id="layer1" class="layer active">
        <label class="label_info">è«‹é»é¸é ˜åŸŸæŸ¥è©¢èª²ç¨‹<br>å¿ƒå¾—æ¡ 1-10 åˆ†åˆ¶ï¼Œæ•¸å­—è¶Šå¤§è¶Šæ¨è–¦</label>
        
        <div class="index_choosebox">
            <input type="button" class="btn_home" value="å¤© (è‡ªç„¶ç§‘å­¸)" onclick="showLayer2('æ ¸å¿ƒ', 'è—è¡“èˆ‡äººæ–‡æ€ç¶­')">
            <input type="button" class="btn_home" value="åœ° (ç¤¾æœƒç§‘å­¸)" onclick="showLayer2('æ ¸å¿ƒ', 'å…¬æ°‘èˆ‡ç¤¾æœƒæ¢ç©¶')">
            <input type="button" class="btn_home" value="äºº (äººæ–‡è—è¡“)" onclick="showLayer2('æ ¸å¿ƒ', 'å“²å­¸èˆ‡é“å¾·æ€è€ƒ')">
            <input type="button" class="btn_home" value="æˆ‘ (å¿ƒç†è‡ªæˆ‘)" onclick="showLayer2('å¤šå…ƒ', 'ç¤¾æœƒç§‘å­¸é ˜åŸŸ')">
            </div>

        <div class="index_choosebox2">
            <input type="button" class="btn_home2" value="æˆ‘è¦è²¢ç»" onclick="window.open('https://forms.gle/6yTjFRWBnxJTjLMT8')">
            <input type="button" class="btn_home2" value="ä»‹é¢èªªæ˜" onclick="alert('é»æ“Šé ˜åŸŸ > é¸æ“‡èª²ç¨‹ > æŸ¥çœ‹å­¸é•·å§å¿ƒå¾—ï¼')">
            <input type="button" class="btn_home2" value="èª²ç¨‹è³‡æº" onclick="window.open('ä½ çš„é›²ç«¯ç¡¬ç¢Ÿé€£çµ')">
            <input type="button" class="btn_home2" value="è¯çµ¡å­¸æœƒ" onclick="location.href='mailto:your-email@example.com'">
        </div>
    </div>

    <div id="layer2" class="layer">
        <div class="nav_group">
            <input type="button" class="btn_home" style="background:#bbb; box-shadow: 2px 2px 0#777;" value="â¬…ï¸ è¿”å›é¦–é " onclick="switchLayer(1)">
        </div>
        <label id="layer2_title" class="label_info"></label>
        <div class="index_choosebox" id="course_list_container" style="display:flex; flex-direction:column;"></div>
    </div>

    <div id="layer3" class="layer">
        <div class="nav_group">
            <input type="button" class="btn_home" style="background:#bbb; box-shadow: 2px 2px 0#777;" value="â¬…ï¸ è¿”å›åˆ—è¡¨" onclick="switchLayer(2)">
            <input type="button" class="btn_home" value="ğŸ  å›é¦–é " onclick="switchLayer(1)">
        </div>
        <label id="final_title" class="label_title"></label>
        <div id="course_info_box"></div>
        <div id="reviews_container" style="width:100%;"></div>
        <div class="nav_group" style="margin-top:10px;">
            <input type="button" class="btn_home" style="background:#bbb; box-shadow: 2px 2px 0#777;" value="â¬…ï¸ è¿”å›åˆ—è¡¨" onclick="switchLayer(2)">
            <input type="button" class="btn_home" value="ğŸ  å›é¦–é " onclick="switchLayer(1)">
        </div>
    </div>

    <p class="label_coder"><b>Coded by</b> huangboxun12 & AI Assistant(Gemini)<br>
       <span class="last_update" onclick="location.reload()">æœ€å¾Œæ›´æ–°: 2026/02/09</span>
    </p>
</div>

<script>
// --- å¯«æ­»çš„èª²ç¨‹è³‡è¨Šè³‡æ–™åº« ---
const courseData = {
    "æ ¸å¿ƒ": {
        "è—è¡“èˆ‡äººæ–‡æ€ç¶­": [
            { id: "A2826", name: "æ­ŒåŠ‡èˆ‡æ­ŒåŠ‡é™¢", teacher: "å»–å©‰å¦‚", credit: 2, info: "...", grading: "..." },
            { id: "A2827", name: "ç¾ä»£è©©èˆ‡ç•¶ä»£æ–‡åŒ–", teacher: "å‘é™½", credit: 2, info: "...", grading: "..." }
        ],
        "å…¬æ°‘èˆ‡ç¤¾æœƒæ¢ç©¶": [
            { id: "A2846", name: "é†«å­¸èˆ‡æ³•å¾‹", teacher: "é™³ä»²éš†", credit: 2, info: "...", grading: "..." }
        ]
    }
    // ...ä»¥æ­¤é¡æ¨
};

const csvUrl = "ä½ çš„Google_CSVé€£çµ";
let allReviews = [];

async function loadReviews() {
    try {
        const res = await fetch(csvUrl);
        const text = await res.text();
        const rows = text.split('\n').map(r => r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/)).slice(1);
        allReviews = rows.map(row => ({
            name: (row[5] || row[13] || row[21] || "").replace(/"/g, ''),
            overall: row[7] || row[15] || row[23] || "?",
            sweet: row[8] || row[16] || row[24] || "?",
            cool: row[9] || row[17] || row[25] || "?",
            comment: (row[12] || row[20] || row[28] || "").replace(/"/g, '')
        }));
    } catch(e) { console.error(e); }
}

function showLayer2(main, sub) {
    switchLayer(2);
    document.getElementById('layer2_title').innerText = sub;
    const container = document.getElementById('course_list_container');
    const courses = courseData[main][sub] || [];
    container.innerHTML = courses.map(c => 
        `<input type="button" class="btn_home" value="${c.name} (${c.teacher})" onclick="showFinal('${main}', '${sub}', '${c.name}')">`
    ).join('');
}

function showFinal(main, sub, cName) {
    switchLayer(3);
    const course = courseData[main][sub].find(c => c.name === cName);
    document.getElementById('final_title').innerText = cName;
    document.getElementById('course_info_box').innerHTML = `
        <div class="label_info" style="background:#fff">${course.teacher} | ${course.id} | ${course.credit}å­¸åˆ†</div>
        <div class="label_comment" style="background:#eee"><b>ç°¡ä»‹ï¼š</b>${course.info}<br><b>è©•åˆ†ï¼š</b>${course.grading}</div>
    `;

    const reviews = allReviews.filter(r => r.name === cName);
    document.getElementById('reviews_container').innerHTML = reviews.length ? reviews.map(r => `
        <div class="label_comment">
            <b>1142 | â­${r.overall} | ğŸ¬${r.sweet} | â„ï¸${r.cool}</b><br><br>
            ${r.comment.replace(/\n/g, '<br>')}
        </div>
    `).join('') : '<div class="label_info">å°šç„¡å¿ƒå¾—ğŸ« </div>';
}

function switchLayer(n) {
    document.querySelectorAll('.layer').forEach(l => l.classList.remove('active'));
    document.getElementById('layer' + n).classList.add('active');
}

loadReviews();
</script>

</body>
</html>
